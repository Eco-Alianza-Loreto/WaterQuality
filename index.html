<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Eco Alianza Water Quality Status</title>
    <style type="text/css">
      html, body {
        height: 100%;
        width: 100%;
        margin: 5px;
        padding: 0px;
      }
      #top-photo {
        width: 824px;
        margin:0 auto;
      }
      #map-canvas {
        height: 90%;
      }
      #map-canvas h1 {
        font-size: medium;
      }
      #map-canvas h2 {
        font-size: small;
      }
      #map-canvas table {
        border-spacing: 0;
        border-collapse: collapse;
      }
      .popup_box {
      }
      .popup_box td{
        border: 1px solid black;
      }
      .popup_photo {
        width: 45%;
        float: left;
      }
      .popup_description{
        width: 45%;
        float: right;
      }
      .popup_data {
        clear: both;
      }
      .popup_column_name {
        font-weight: bold;
        padding: 4px;
      }
      .popup_column_value {
        text-align: right;
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script src="js/dev/infobubble.js" type="text/javascript"></script>
    <script src="js/dev/tabletop.js" type="text/javascript"></script>
    <script src="js/dev/jquery.js" type="text/javascript"></script>
    <script src="js/dev/handlebars.js" type="text/javascript"></script>
    <script src="js/dev/ea.js" type="text/javascript"></script>
    <script>
      var spreadsheet_key = "0Ar8LDnqhlSk_dG5QYlB1ODd6Y0NDR3VCWHEzTnpZQlE";
      google.maps.event.addDomListener(window, 'load', function(){initialize(spreadsheet_key);});
    </script>
  </head>
  <body>
    <script id="popup-template" type="text/x-handlebars-template">
      <div class="popup_box">
        <div class="popup_photo">
          <h2>Photo</h2>
          <img src="images/{{site}}.jpg" width=300 height=300></img>
        </div> <!-- End popup_photo -->
        <div class="popup_description">
          <h2>Description</h2>
          {{description}}
        </div> <!-- End popup_description -->
        <div class="popup_data">
          <h2>Historical data</h2>
          <table>
            <tr>
              {{! Iterate over each column heading }}
              {{#each labels}}
                <td class="popup_column_name">{{{this}}}</td>
              {{/each}}
            </tr>
            {{! Iterate over each row of data }}
            {{#each data}}
              <tr>
                {{! Finally, iterate over each data cell in the row }}
                {{#each this}}
                  <td class="popup_column_value">
                  {{#if this}}
                    {{this}}
                  {{else}}
                    N/A
                  {{/if}}
                  </td>
                {{/each}}
              </tr>
            {{/each}}
          </table>
          </ul>
        </div>    
      </div> <!-- End popup_box -->
    </script> <!-- End handlebars popup template -->
    <div id="map-canvas"></div>
  </body>
</html>

